# EchoOps - "The System That Speaks"

**EchoOps** is an ambient computing interface for DevOps. It transforms Datadog from a visual dashboard into an **active voice participant** in your war room.

By chaining **Datadog Signals**, **Google Gemini 2.5 Flash Lite**, and **ElevenLabs**, EchoOps allows engineers to *hear* the root cause of an incident and *speak* the remediation, drastically reducing Mean Time To Resolution (MTTR).

> ðŸ† Built for the **AI Partner Catalyst Hackathon**.

## ðŸš€ Features

-   **Voice-Enabled Incidents**: Transforms Datadog Webhook payloads into concise, audible "Situation Reports" (SitReps) using Gemini 2.5 Flash Lite.
-   **High-Fidelity Audio**: Uses ElevenLabs *Turbo v2* model for sub-second text-to-speech generation.
-   **Active Remediation**: Accepts voice commands (simulated via API) to trigger infrastructure changes.
-   **Observability First**: Full `ddtrace` integration for every voice generation step.

## ðŸ› ï¸ Architecture

1.  **Trigger**: Datadog Monitor sends a Webhook to EchoOps.
2.  **Analyze**: EchoOps fetches recent logs and asks **Gemini** to determine the Root Cause.
3.  **Speak**: **ElevenLabs** turns the analysis into an audio file.
4.  **Visualize**: A custom Dashboard Widget in Datadog plays the audio automatically.

## ðŸ“¦ Setup & Installation

### Prerequisites
-   Python 3.11+
-   Google Cloud Project (Vertex AI enabled)
-   Datadog Account (API & Application Keys)
-   ElevenLabs Account (API Key)

### 1. Environment Variables
Create a `.env` file:
```env
GOOGLE_APPLICATION_CREDENTIALS="path/to/key.json"
GOOGLE_CLOUD_PROJECT="your-project-id"

DD_API_KEY="your_dd_api_key"
DD_APP_KEY="your_dd_app_key"
DD_SITE="datadoghq.com"
DD_SERVICE="echo-ops"
DD_ENV="production"
DD_LOGS_INJECTION=true

ELEVENLABS_API_KEY="your_elevenlabs_key"
```

### 2. Install Dependencies
```bash
pip install -r requirements.txt
```

### 3. Run the Service
```bash
ddtrace-run uvicorn echo_service:app --reload
```
*Port 8000 is now active.*

### 4. Deploy to Google Cloud Run
To deploy the hosted application:

1.  Ensure you have the Google Cloud SDK installed and authenticated.
2.  Run the deployment script:
    ```bash
    sh deploy.sh
    ```
3.  Follow the prompts to enter your Project ID. The script will build the container and deploy to Cloud Run.
4.  Once complete, it will output the **Hosted Application URL**.

## ðŸŽ§ Demo Walkthrough

1.  **Open the Console**: Navigate to `http://localhost:8000/static/index.html`. This is your "Headless Console".
2.  **Trigger Alert**: Send a mock webhook to simulate an incident:
    ```bash
    curl -X POST "http://localhost:8000/webhook/datadog" \
         -H "Content-Type: application/json" \
         -d '{ "event_title": "High Latency in PaymentGateway", "body": "Latency > 500ms" }'
    ```
3.  **Listen**: The console will play the audio SitRep generated by Gemini + ElevenLabs.
4.  **Respond**: (Simulation) Send a command to fix it.
    ```bash
    curl -X POST "http://localhost:8000/command" \
         -d '{"transcript": "Echo, restart the payment service.", "user_id": "sre_user"}'
    ```

## ðŸ“Š Datadog Artifacts

-   `datadog_export.json`: Import this to create the **EchoOps War Room** dashboard.
-   `datadog_monitors/*.json`: Import these to create the detection rules.

## ðŸ“„ License
MIT License
